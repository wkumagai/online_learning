# 市場情報（株価・ニュース）解説書

## 1. 市場データとは

市場データとは、金融市場における取引情報を数値化したデータのことです。主に以下の種類があります：

- **株価データ**: 個別銘柄の価格情報
- **指数データ**: 日経平均やS&P500などの市場全体の動向を示す指標
- **ニュースデータ**: 企業や経済に関するニュース情報
- **取引高データ**: 売買の活発さを示す指標

### 取得時の注意点

- **タイムラグ**: リアルタイムデータは有料サービスが多く、無料APIは15分〜1日の遅延がある
- **API制限**: 多くのデータプロバイダは1分あたりのリクエスト数に制限がある
- **データ欠損**: 祝日や取引停止時間帯はデータが存在しない
- **異常値**: 株式分割や統合時に価格が大きく変動する場合がある
- **タイムゾーン**: 国際的なデータを扱う場合はタイムゾーンの違いに注意

## 2. 売買方法の概要

### 買い（ロングポジション）
- **概要**: 安く買って高く売ることで利益を得る最も基本的な取引
- **利益**: 売却価格 > 購入価格 の場合に利益
- **リスク**: 株価下落による損失

### 売り（ショートポジション）
- **概要**: 高く売って安く買い戻すことで利益を得る取引
- **利益**: 売却価格 > 買戻価格 の場合に利益
- **リスク**: 株価上昇による損失（理論上は無限大のリスク）

## 3. 売買コストの基本概念

取引には以下のコストが発生します：

- **売買手数料**: 証券会社に支払う手数料（定額制や従量制がある）
- **スプレッド**: 売値と買値の差額
- **スリッページ**: 注文時の価格と実際の約定価格の差
- **税金**: 譲渡益課税（日本では約20%）

これらのコストは戦略の収益性に大きく影響するため、バックテストや実取引時に考慮する必要があります。

## 4. 株価データの構造

標準的な株価データには以下の要素が含まれます：

| 項目 | 説明 | 英語表記 |
|------|------|----------|
| 日時 | データの日時 | Date/Time |
| 始値 | 期間内の最初の取引価格 | Open |
| 高値 | 期間内の最高価格 | High |
| 安値 | 期間内の最低価格 | Low |
| 終値 | 期間内の最後の取引価格 | Close |
| 調整後終値 | 配当や株式分割を調整した終値 | Adjusted Close |
| 出来高 | 取引された株式数 | Volume |

### データ形式例（CSV）:
```
Date,Open,High,Low,Close,Adj Close,Volume
2023-01-04,130.28,131.03,125.85,126.36,126.36,89112300
2023-01-05,127.13,128.69,124.89,126.65,126.65,75703700
```

## 5. ニュースデータの構造

ニュースデータは通常以下の要素で構成されます：

| 項目 | 説明 |
|------|------|
| 日時 | ニュースの配信日時 |
| 見出し | ニュースのタイトル |
| 本文 | ニュースの詳細内容 |
| ソース | 配信元（ロイター、ブルームバーグなど） |
| 関連銘柄 | ニュースに関連する銘柄コード |
| センチメント | ポジティブ/ネガティブの感情分析結果（APIによる） |

### データ形式例（JSON）:
```json
{
  "datetime": "2023-01-04T09:30:00+09:00",
  "headline": "トヨタ、新型EVを発表 2025年までに30車種投入へ",
  "content": "トヨタ自動車は4日、新型電気自動車（EV）を発表した。同社は2025年までに...",
  "source": "日本経済新聞",
  "symbols": ["7203.T"],
  "sentiment": {
    "score": 0.65,
    "label": "positive"
  }
}
```

## 6. データ管理方法

効率的なデータ管理のために以下の方針を推奨します：

### ディレクトリ構造
```
data/
  ├── market_information/
  │   ├── raw/                  # 生データ
  │   │   ├── historical_data_JP/  # 日本株の履歴データ
  │   │   └── historical_data_US/  # 米国株の履歴データ
  │   ├── processed/            # 加工済みデータ
  │   ├── news/                 # ニュースデータ
  │   └── list/                 # 銘柄リスト
```

### 命名規則
- 生データファイル: `{symbol}_{interval}_{date}.csv`
  例: `AAPL_1d_20230104.csv`
- 加工済みデータ: `{symbol}_{interval}_{features}_{date}.csv`
  例: `AAPL_1d_with_indicators_20230104.csv`
- ニュースデータ: `news_{source}_{date}.json`
  例: `news_reuters_20230104.json`

### バージョン管理
- データの取得日と加工日をメタデータとして記録
- 加工プロセスのバージョンを記録
- データ変換の再現性を確保するためのスクリプトを保存

### 自動バックアップ
- 重要なデータは定期的にバックアップ
- クラウドストレージとローカルストレージの併用を推奨

適切なデータ管理により、分析の再現性が向上し、データの整合性が保たれます。